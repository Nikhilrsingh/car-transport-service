<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Feedback & Reviews | Harihar Car Carriers</title>
    <base href="./" />
    <link rel="icon" type="image/png" href="../assets/icons/favicon.png" />
    <link rel="stylesheet" href="../css/components/navbar.css" />
    <link rel="stylesheet" href="../css/components/middle-navbar.css" />
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/components/feedback.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../css/components/glowing-input.css">
    
    <!-- Swiper CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  </head>
  <body>
    <header>
      <div id="scroll-progress"></div>
      <div id="navbar-container"></div>
    </header>

    <main>
      <div class="feedback-header enhanced-header">
        <h1>⭐ Customer Reviews & Feedback</h1>
        <p>Real experiences from customers who trusted Harihar Car Carriers</p>
      </div>

      <!-- Feedback Form -->
      <div class="feedback-form-section">
        <form class="feedback-form" id="feedbackForm">
          <label for="picUrl">Image URL</label>
          <input
            type="url"
            id="picUrl"
            placeholder="Paste your profile image URL or use default"
          />

          <label for="productImgUrl">Product Image URL</label>
          <input
            type="url"
            id="productImgUrl"
            placeholder="Paste product/car image URL"
          />

          <label for="username">Your Name</label>
          <input
            type="text"
            id="username"
            placeholder="Your name..."
            required
          />

          <label>Stars</label>
          <div class="star-rating" id="starRating">
            <i class="fa-regular fa-star" data-star="1"></i>
            <i class="fa-regular fa-star" data-star="2"></i>
            <i class="fa-regular fa-star" data-star="3"></i>
            <i class="fa-regular fa-star" data-star="4"></i>
            <i class="fa-regular fa-star" data-star="5"></i>
          </div>

          <label for="message">Feedback</label>
          <textarea
            id="message"
            placeholder="Write your experience here..."
            required
          ></textarea>

          <button type="submit">Submit Feedback</button>
        </form>
      </div>

      <!-- What Our Customers Say - Premium Reviews Section -->
      <section class="premium-reviews-section">
        <div class="reviews-container">
          <!-- Rating Summary (Left) -->
          <div class="rating-summary">
            <h2 class="reviews-title">What Our Customers Say</h2>
            <p class="reviews-subtitle">Real experiences from real customers</p>
            
            <div class="rating-overview">
              <div class="overall-rating">
                <div class="rating-number">4.5</div>
                <div class="rating-max">/5.0</div>
              </div>
              <div class="stars-display">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
              </div>
            </div>

            <div class="review-count">Based on 12 reviews</div>

            <!-- Rating Breakdown -->
            <div class="rating-breakdown">
              <div class="rating-bar">
                <span class="rating-label">
                  <i class="fas fa-star"></i> 5
                </span>
                <div class="bar-container">
                  <div class="bar-fill" style="width: 58%"></div>
                </div>
                <span class="rating-percentage">58% (7)</span>
              </div>
              
              <div class="rating-bar">
                <span class="rating-label">
                  <i class="fas fa-star"></i> 4
                </span>
                <div class="bar-container">
                  <div class="bar-fill" style="width: 33%"></div>
                </div>
                <span class="rating-percentage">33% (4)</span>
              </div>
              
              <div class="rating-bar">
                <span class="rating-label">
                  <i class="fas fa-star"></i> 3
                </span>
                <div class="bar-container">
                  <div class="bar-fill" style="width: 8%"></div>
                </div>
                <span class="rating-percentage">8% (1)</span>
              </div>
              
              <div class="rating-bar">
                <span class="rating-label">
                  <i class="fas fa-star"></i> 2
                </span>
                <div class="bar-container">
                  <div class="bar-fill" style="width: 0%"></div>
                </div>
                <span class="rating-percentage">0% (0)</span>
              </div>
              
              <div class="rating-bar">
                <span class="rating-label">
                  <i class="fas fa-star"></i> 1
                </span>
                <div class="bar-container">
                  <div class="bar-fill" style="width: 0%"></div>
                </div>
                <span class="rating-percentage">0% (0)</span>
              </div>
            </div>

            <button class="cta-button">Write a Review</button>
            <button class="cta-button secondary">View All Reviews</button>
          </div>

          <!-- Review Cards (Right) -->
          <div class="review-cards-container">
            <!-- Review Card 1 -->
            <div class="premium-review-card">
              <div class="card-header">
                <div class="reviewer-info">
                  <img src="../assets/images/gallery-1.jpg" alt="Rahul Sharma" class="reviewer-avatar">
                  <div class="reviewer-meta">
                    <h3 class="reviewer-name">Rahul Sharma</h3>
                    <span class="verified-badge"><i class="fas fa-check-circle"></i> Verified</span>
                  </div>
                </div>
                <span class="review-date">1 week ago</span>
              </div>
              
              <div class="review-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <span class="rating-text">5.0</span>
              </div>

              <h4 class="review-title">Excellent Service!</h4>
              
              <div class="review-content">
                <p>The car transport service was exceptional. My vehicle arrived on time and in perfect condition. Highly recommend Harihar Carriers!</p>
              </div>

              <div class="review-footer">
                <button class="helpful-btn"><i class="fas fa-thumbs-up"></i> Helpful</button>
              </div>
            </div>

            <!-- Review Card 2 -->
            <div class="premium-review-card">
              <div class="card-header">
                <div class="reviewer-info">
                  <img src="../assets/images/gallery-3.jpg" alt="Priya Patel" class="reviewer-avatar">
                  <div class="reviewer-meta">
                    <h3 class="reviewer-name">Priya Patel</h3>
                    <span class="verified-badge"><i class="fas fa-check-circle"></i> Verified</span>
                  </div>
                </div>
                <span class="review-date">1 week ago</span>
              </div>
              
              <div class="review-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star-half-alt"></i>
                <span class="rating-text">4.0</span>
              </div>

              <h4 class="review-title">Great Experience</h4>
              
              <div class="review-content">
                <p>Good service with timely delivery. The pickup and drop-off were smooth. Would recommend to others looking for vehicle transport.</p>
              </div>

              <div class="review-footer">
                <button class="helpful-btn"><i class="fas fa-thumbs-up"></i> Helpful</button>
              </div>
            </div>

            <!-- Review Card 3 -->
            <div class="premium-review-card">
              <div class="card-header">
                <div class="reviewer-info">
                  <img src="../assets/images/gallery-5.jpg" alt="Amit Kumar" class="reviewer-avatar">
                  <div class="reviewer-meta">
                    <h3 class="reviewer-name">Amit Kumar</h3>
                    <span class="verified-badge"><i class="fas fa-check-circle"></i> Verified</span>
                  </div>
                </div>
                <span class="review-date">2 weeks ago</span>
              </div>
              
              <div class="review-rating">
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <i class="fas fa-star"></i>
                <span class="rating-text">5.0</span>
              </div>

              <h4 class="review-title">Professional & Reliable</h4>
              
              <div class="review-content">
                <p>Excellent attention to detail. The team was professional, courteous, and kept me informed throughout the entire process. Exceeded expectations!</p>
              </div>

              <div class="review-footer">
                <button class="helpful-btn"><i class="fas fa-thumbs-up"></i> Helpful</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Testimonials Carousel -->
      <section class="testimonials-carousel-section">
        <div class="swiper testimonialsSwiper">
          <div class="swiper-wrapper" id="swiperWrapper">
            <!-- Testimonial slides will be dynamically inserted here -->
          </div>
          
          <!-- Navigation arrows -->
          <div class="swiper-button-next"></div>
          <div class="swiper-button-prev"></div>
          
          <!-- Pagination dots -->
          <div class="swiper-pagination"></div>
        </div>
      </section>
    </main>

    <!-- Footer -->
    <footer>
      <div id="footer-container"></div>
    </footer>

    <!-- Swiper JS -->
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <script>
      // Load sample testimonials
      let testimonials = [
        {
          pic: "https://img.freepik.com/premium-photo/image-25-year-old-indian-man-that-is-smiling-camera_878783-7216.jpg?w=1060",
          product: "https://th.bing.com/th/id/R.b066440ede15d1b3c5da4098a46ad9ad?rik=24euCIHs4PjVmg&riu=http%3a%2f%2fwww.transportingcars.co.uk%2fwp-content%2fuploads%2f2022%2f04%2fIMG_20190103_131224-940x400-1-800x340.jpg&ehk=OkRTvIg%2bzy8OpMMGuMcql3y63GSEvNglQ8BXWW4hISE%3d&risl=&pid=ImgRaw&r=0",
          name: "Ravi Singh",
          stars: 5,
          message: "I used this service last week and honestly the whole process was super smooth. The team kept me updated at every step and the delivery was right on time. I didn't face any confusion or delay. I'll definitely use it again when needed.",
          time: "2025-11-10 09:02",
          comments: [
            { name: "Admin", text: "Thank you so much for trusting us!" },
          ],
        },
        {
          pic: "https://randomuser.me/api/portraits/women/65.jpg",
          product: "https://paragonmovers.com/wp-content/uploads/2021/05/csc1.jpg",
          name: "Shruti Patel",
          stars: 4,
          message: "This was my first time trying their service and I'm really impressed. The staff was polite, the communication was clear, and everything happened exactly as promised. It felt very professional and stress-free. Highly recommended from my side.",
          time: "2025-11-12 15:25",
          comments: [],
        },
        {
          pic: "https://i.pinimg.com/originals/23/e3/f8/23e3f84e7bf2f39381873d37abe7944c.jpg",
          product: "https://tse4.mm.bing.net/th/id/OIP.jAsEPf6Ah_eyQtJ8l7ViggHaEW?cb=ucfimg2ucfimg=1&w=825&h=485&rs=1&pid=ImgDetMain&o=7&rm=3",
          name: "Jack",
          stars: 5,
          message: "I had a small issue with timing but their support team handled it quickly and politely. The overall experience was very good and worth the price. I appreciated how seriously they took customer satisfaction. I would happily return again.",
          time: "2025-11-10 09:02",
          comments: [
            { name: "Admin", text: "Thank you so much for trusting us!" },
          ],
        },
      ];

      let swiper; // Store swiper instance globally

      function renderTestimonials() {
        const wrapper = document.getElementById("swiperWrapper");
        wrapper.innerHTML = "";
        
        testimonials.forEach((t, i) => {
          const slide = document.createElement('div');
          slide.className = 'swiper-slide';
          slide.innerHTML = `
            <div class="testimonial-card" data-index="${i}">
              <div class="testimonial-images">
                <img src="${t.pic}" alt="${t.name}" class="testimonial-pic">
                ${t.product ? `<img src="${t.product}" alt="Product" class="testimonial-product-img">` : ""}
              </div>
              <div class="testimonial-main">
                <div class="testimonial-header">
                  <span class="testimonial-name">${t.name}</span>
                  <span class="testimonial-stars">${"★".repeat(t.stars)}${"☆".repeat(5 - t.stars)}</span>
                  <span class="testimonial-time">${t.time}</span>
                </div>
                <div class="testimonial-message">${t.message}</div>
                <div class="comments-section" id="comments-${i}">
                  <b>Comments</b>
                  <div class="comment-list">${t.comments.map(c => 
                    `<div class="comment"><span class="comment-author">${c.name}:</span> ${c.text}</div>`
                  ).join("")}</div>
                  <form class="comment-form" data-index="${i}" onsubmit="return false">
                    <input type="text" placeholder="Add a comment..." required>
                    <button type="submit">Post</button>
                  </form>
                </div>
              </div>
            </div>
          `;
          wrapper.appendChild(slide);
        });

        // Reinitialize Swiper after adding new slides
        initSwiper();

        // Add comment form handlers
        document.querySelectorAll(".comment-form").forEach((form) => {
          form.onsubmit = function () {
            const idx = this.getAttribute("data-index");
            const val = this.querySelector("input").value.trim();
            if (val) {
              testimonials[idx].comments.push({ name: "User", text: val });
              renderTestimonials();
            }
          };
        });
      }

      function initSwiper() {
        // Destroy existing swiper if it exists
        if (swiper) {
          swiper.destroy(true, true);
        }

        // Initialize Swiper
        swiper = new Swiper(".testimonialsSwiper", {
          slidesPerView: 1,
          spaceBetween: 30,
          grabCursor: true,
          loop: true,
          
          // Auto-rotation (pause on hover)
          autoplay: {
            delay: 6000,
            disableOnInteraction: false,
            pauseOnMouseEnter: true,
          },
          
          // Pagination dots
          pagination: {
            el: ".swiper-pagination",
            clickable: true,
            dynamicBullets: true,
          },
          
          // Navigation arrows
          navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
          },
          
          // Keyboard control
          keyboard: {
            enabled: true,
            onlyInViewport: true,
          },
          
          // Mouse wheel control
          mousewheel: {
            forceToAxis: true,
          },
          
          // Smooth transitions
          speed: 600,
          effect: 'slide',
          
          // Responsive breakpoints
          breakpoints: {
            320: {
              slidesPerView: 1,
              spaceBetween: 20,
            },
            768: {
              slidesPerView: 1,
              spaceBetween: 30,
            },
            1024: {
              slidesPerView: 1,
              spaceBetween: 40,
            },
          },
        });
      }

      // Initial render
      renderTestimonials();

      // Star rating handling
      let currentStars = 0;
      document.querySelectorAll("#starRating .fa-star").forEach((star) => {
        star.setAttribute('tabindex', '0');
        star.setAttribute('role', 'button');
        star.setAttribute('aria-label', (star.dataset && star.dataset.star) ? (star.dataset.star + ' star') : 'star');

        star.addEventListener("mouseenter", function () {
          let n = Number(this.dataset.star);
          highlightStars(n);
        });
        star.addEventListener("mouseleave", function () {
          highlightStars(currentStars);
        });
        star.addEventListener("click", function () {
          currentStars = Number(this.dataset.star);
          highlightStars(currentStars);
        });

        star.addEventListener('keydown', function (e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            this.click();
          }
        });
      });

      function highlightStars(n) {
        document.querySelectorAll("#starRating .fa-star").forEach((star, i) => {
          star.className = i < n ? "fa-solid fa-star" : "fa-regular fa-star";
        });
      }

      // Form submit
      document.getElementById("feedbackForm").onsubmit = function (e) {
        e.preventDefault();
        const pic = document.getElementById("picUrl").value || "https://randomuser.me/api/portraits/lego/1.jpg";
        const product = document.getElementById("productImgUrl").value || "";
        const name = document.getElementById("username").value.trim();
        const msg = document.getElementById("message").value.trim();
        const stars = currentStars;
        
        if (!name || !msg || !stars) {
          alert("Please complete your review and select stars.");
          return;
        }
        
        const now = new Date();
        const timeStr = now.getFullYear() + "-" +
          String(now.getMonth() + 1).padStart(2, "0") + "-" +
          String(now.getDate()).padStart(2, "0") + " " +
          String(now.getHours()).padStart(2, "0") + ":" +
          String(now.getMinutes()).padStart(2, "0");
        
        testimonials.unshift({
          pic,
          product,
          name,
          stars,
          message: msg,
          time: timeStr,
          comments: [],
        });
        
        this.reset();
        currentStars = 0;
        highlightStars(0);
        renderTestimonials();
        
        // Scroll to carousel section
        document.querySelector('.testimonials-carousel-section').scrollIntoView({ behavior: 'smooth' });
      };

      window.addEventListener("load", () => {
        const overlay = document.querySelector(".loading-overlay");
        if (overlay) overlay.remove();
      });
    </script>

    <script src="../js/modules/search.js"></script>
    <script src="../js/modules/loading-state-manager.js"></script>
    <script src="../js/modules/page-navigation-loader.js"></script>
    <script src="../js/modules/navbar-loader.js?v=2"></script>
    <script src="../js/modules/footer-loader.js"></script>
    <script src="../js/modules/themes.js"></script>
    <script src="../js/modules/component-initializer.js"></script>
    <script src="../js/script.js"></script>
  </body>
</html>
