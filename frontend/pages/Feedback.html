<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Feedback & Reviews | Harihar Car Carriers</title>
    <base href="./" />
  <link rel="icon" type="image/png" href="../assets/icons/favicon.png" />
    <link rel="stylesheet" href="../css/components/navbar.css" />
    <link rel="stylesheet" href="../css/components/middle-navbar.css" />
    <link rel="stylesheet" href="../css/styles.css">
    <link rel="stylesheet" href="../css/components/feedback.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="../css/components/glowing-input.css">

  </head>
  <body>
    <header>
      <!-- Include your navbar here or load with JS -->
      <div id="navbar-container"></div>
    </header>

    <main>
      <div class="feedback-header enhanced-header">
        <h1>‚≠ê Customer Reviews & Feedback</h1>
        <p>
           Real experiences from customers who trusted Harihar Car Carriers
        </p>
      </div>

      <!-- Feedback Form -->
      <div class="feedback-form-section">
        <form class="feedback-form" id="feedbackForm">
          <label for="picUrl">Image URL</label>
          <input
            type="url"
            id="picUrl"
            placeholder="Paste your profile image URL or use default"
          />

          <label for="productImgUrl">Product Image URL</label>
          <input
            type="url"
            id="productImgUrl"
            placeholder="Paste product/car image URL"
          />

          <label for="username">Your Name</label>
          <input
            type="text"
            id="username"
            placeholder="Your name..."
            required
          />

          <label>Stars</label>
          <div class="star-rating" id="starRating">
            <i class="fa-regular fa-star" data-star="1"></i>
            <i class="fa-regular fa-star" data-star="2"></i>
            <i class="fa-regular fa-star" data-star="3"></i>
            <i class="fa-regular fa-star" data-star="4"></i>
            <i class="fa-regular fa-star" data-star="5"></i>
          </div>

          <label for="message">Feedback</label>
          <textarea
            id="message"
            placeholder="Write your experience here..."
            required
          ></textarea>

          <button type="submit">Submit Feedback</button>
        </form>
      </div>
      <!-- Testimonials List -->
      <section class="testimonials-list" id="testimonialsList">
        <!-- Rendered by JS -->
      </section>

    </main>

    <!-- Footer -->
    <footer>
      <!-- Your dynamic or static footer here -->
      <div id="footer-container"></div>
    </footer>

    <script>
      // Load sample testimonials
      let testimonials = [
        {
          pic: "https://img.freepik.com/premium-photo/image-25-year-old-indian-man-that-is-smiling-camera_878783-7216.jpg?w=1060",
          product:
            "https://th.bing.com/th/id/R.b066440ede15d1b3c5da4098a46ad9ad?rik=24euCIHs4PjVmg&riu=http%3a%2f%2fwww.transportingcars.co.uk%2fwp-content%2fuploads%2f2022%2f04%2fIMG_20190103_131224-940x400-1-800x340.jpg&ehk=OkRTvIg%2bzy8OpMMGuMcql3y63GSEvNglQ8BXWW4hISE%3d&risl=&pid=ImgRaw&r=0",
          name: "Ravi Singh",
          stars: 5,
          message:
            "I used this service last week and honestly the whole process was super smooth. The team kept me updated at every step and the delivery was right on time. I didn‚Äôt face any confusion or delay. I‚Äôll definitely use it again when needed.",
          time: "2025-11-10 09:02",
          comments: [
            { name: "Admin", text: "Thank you so much for trusting us!" },
          ],
        },
        {
          pic: "https://randomuser.me/api/portraits/women/65.jpg",
          product:
            "https://paragonmovers.com/wp-content/uploads/2021/05/csc1.jpg",
          name: "Shruti Patel",
          stars: 4,
          message:
            "This was my first time trying their service and I‚Äôm really impressed. The staff was polite, the communication was clear, and everything happened exactly as promised. It felt very professional and stress-free. Highly recommended from my side.",
          time: "2025-11-12 15:25",
          comments: [],
        },
        {
          pic: "https://i.pinimg.com/originals/23/e3/f8/23e3f84e7bf2f39381873d37abe7944c.jpg",
          product:
            "https://tse4.mm.bing.net/th/id/OIP.jAsEPf6Ah_eyQtJ8l7ViggHaEW?cb=ucfimg2ucfimg=1&w=825&h=485&rs=1&pid=ImgDetMain&o=7&rm=3",
          name: "Jack",
          stars: 5,
          message:
            "I had a small issue with timing but their support team handled it quickly and politely. The overall experience was very good and worth the price. I appreciated how seriously they took customer satisfaction. I would happily return again.",
          time: "2025-11-10 09:02",
          comments: [
            { name: "Admin", text: "Thank you so much for trusting us!" },
          ],
        },
      ];

      function renderTestimonials() {
        const list = document.getElementById("testimonialsList");
        list.innerHTML = "";
        testimonials.forEach((t, i) => {
          list.innerHTML += `
          <div class="testimonial-card" data-index="${i}">
            <div style="display:flex; align-items:center">
              <img src="${t.pic}" alt="${t.name}" class="testimonial-pic">
              ${
                t.product
                  ? `<img src="${t.product}" alt="Product" class="testimonial-product-img">`
                  : ""
              }
            </div>
            <div class="testimonial-main">
              <div class="testimonial-header">
                <span class="testimonial-name">${t.name}</span>
                <span class="testimonial-stars">${"‚òÖ".repeat(
                  t.stars
                )}${"‚òÜ".repeat(5 - t.stars)}</span>
                <span class="testimonial-time">${t.time}</span>
                <button class="delete-btn" data-index="${i}" title="Delete Review"><i class="fa fa-trash"></i></button>
              </div>
              <div class="testimonial-message">${t.message}</div>
              <div class="comments-section" id="comments-${i}">
                <b>Comments</b>
                <div class="comment-list">${t.comments
                  .map(
                    (c) =>
                      `<div class="comment"><small>${c.name}:</small> ${c.text}</div>`
                  )
                  .join("")}</div>
                <form class="comment-form" data-index="${i}" onsubmit="return false">
                  <input type="text" placeholder="Add a comment..." required>
                  <button type="submit">Post</button>
                </form>
              </div>
            </div>
          </div>
        `;
        });
        document.querySelectorAll(".delete-btn").forEach((btn) => {
          btn.onclick = function () {
            const idx = this.getAttribute("data-index");
            testimonials.splice(idx, 1);
            renderTestimonials();
          };
        });
        document.querySelectorAll(".comment-form").forEach((form) => {
          form.onsubmit = function () {
            const idx = this.getAttribute("data-index");
            const val = this.querySelector("input").value.trim();
            if (val) {
              testimonials[idx].comments.push({ name: "User", text: val });
              renderTestimonials();
            }
          };
        });
      }

      renderTestimonials();

      // Star rating handling (mouse + keyboard friendly)
      let currentStars = 0;
      document.querySelectorAll("#starRating .fa-star").forEach((star) => {
        // make each star keyboard-focusable
        star.setAttribute('tabindex', '0');
        star.setAttribute('role', 'button');
        star.setAttribute('aria-label', (star.dataset && star.dataset.star) ? (star.dataset.star + ' star') : 'star');

        star.addEventListener("mouseenter", function () {
          let n = Number(this.dataset.star);
          highlightStars(n);
        });
        star.addEventListener("mouseleave", function () {
          highlightStars(currentStars);
        });
        star.addEventListener("click", function () {
          currentStars = Number(this.dataset.star);
          highlightStars(currentStars);
        });

        // keyboard support (Enter or Space to select)
        star.addEventListener('keydown', function (e) {
          if (e.key === 'Enter' || e.key === ' ') {
            e.preventDefault();
            this.click();
          }
        });
      });
      function highlightStars(n) {
        document.querySelectorAll("#starRating .fa-star").forEach((star, i) => {
          star.className = i < n ? "fa-solid fa-star" : "fa-regular fa-star";
        });
      }

      // Form submit
      document.getElementById("feedbackForm").onsubmit = function (e) {
        e.preventDefault();
        const pic =
          document.getElementById("picUrl").value ||
          "https://randomuser.me/api/portraits/lego/1.jpg";
        const product = document.getElementById("productImgUrl").value || "";
        const name = document.getElementById("username").value.trim();
        const msg = document.getElementById("message").value.trim();
        const stars = currentStars;
        if (!name || !msg || !stars) {
          alert("Please complete your review and select stars.");
          return;
        }
        const now = new Date();
        const timeStr =
          now.getFullYear() +
          "-" +
          String(now.getMonth() + 1).padStart(2, "0") +
          "-" +
          String(now.getDate()).padStart(2, "0") +
          " " +
          String(now.getHours()).padStart(2, "0") +
          ":" +
          String(now.getMinutes()).padStart(2, "0");
        testimonials.unshift({
          pic,
          product,
          name,
          stars,
          message: msg,
          time: timeStr,
          comments: [],
        });
        this.reset();
        currentStars = 0;
        highlightStars(0);
        renderTestimonials();
      };
    </script>

    <script src="../js/modules/search.js"></script>
    <!-- Loading State Manager - Must load first -->
    <script src="../js/modules/loading-state-manager.js"></script>
    <!-- Page Navigation Loader - Must load after loading-state-manager -->
    <script src="../js/modules/page-navigation-loader.js"></script>
    <script src="../js/modules/navbar-loader.js?v=2"></script>

    <script src="../js/modules/footer-loader.js"></script>
    <script src="../js/modules/themes.js"></script>

    <!-- Back to Top Button -->
    <button class="back-to-top" id="backToTop">
      <i class="fas fa-arrow-up"></i>
    </button>

    <!-- Top to Bottom Button -->
    <button class="back-to-bottom" id="backToBottom">
      <i class="fas fa-arrow-down"></i>
    </button>

    <!-- üöÄ Floating Action Menu loaded via footer component -->
  </body>
</html>
