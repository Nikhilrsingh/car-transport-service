<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scroll Menu & More Menu Fix Test</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Base CSS -->
    <link rel="stylesheet" href="css/styles.css">
    
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        
        .test-header {
            background: rgba(0, 0, 0, 0.8);
            padding: 20px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .test-content {
            padding: 40px 20px;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .status-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .status-card {
            background: rgba(255, 255, 255, 0.15);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .status-card.success {
            border-color: #4ade80;
            background: rgba(74, 222, 128, 0.2);
        }
        
        .status-card.error {
            border-color: #f87171;
            background: rgba(248, 113, 113, 0.2);
        }
        
        .status-card.warning {
            border-color: #fbbf24;
            background: rgba(251, 191, 36, 0.2);
        }
        
        .test-button {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }
        
        .scroll-content {
            height: 800px;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            display: flex;
            flex-direction: column;
            justify-content: space-around;
            align-items: center;
        }
        
        .scroll-indicator {
            font-size: 48px;
            animation: bounce 2s infinite;
        }
        
        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }
        
        .component-info {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
            font-size: 14px;
        }
        
        .success-icon { color: #4ade80; }
        .error-icon { color: #f87171; }
        .warning-icon { color: #fbbf24; }
        
        .instructions {
            background: rgba(59, 130, 246, 0.2);
            border: 1px solid rgba(59, 130, 246, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .instructions h3 {
            margin-top: 0;
            color: #93c5fd;
        }
        
        .instructions ol {
            padding-left: 20px;
        }
        
        .instructions li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>üîß Scroll Menu & More Menu Fix Test</h1>
        <p>Testing FAB (Floating Action Menu), Bottom Action Bar, and Smart Scroll Button across all pages</p>
    </div>

    <div class="test-content">
        <div class="instructions">
            <h3>üìã Test Instructions</h3>
            <ol>
                <li><strong>Look for the FAB menu</strong> in the bottom-right corner (circular button with + icon)</li>
                <li><strong>Check the Bottom Action Bar</strong> at the bottom of the screen (with clock, quote button, etc.)</li>
                <li><strong>Find the Smart Scroll Button</strong> (arrow button that appears when scrolling)</li>
                <li><strong>Test functionality</strong> by clicking each component</li>
                <li><strong>Scroll down</strong> to see the scroll button behavior</li>
            </ol>
        </div>

        <div class="test-section">
            <h2>üîç Component Detection</h2>
            <div class="status-grid" id="statusGrid">
                <!-- Status cards will be populated by JavaScript -->
            </div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="test-button" onclick="runDetection()">üîÑ Refresh Detection</button>
                <button class="test-button" onclick="testComponents()">üß™ Test Components</button>
                <button class="test-button" onclick="forceInitialize()">‚ö° Force Initialize</button>
            </div>
        </div>

        <div class="test-section">
            <h2>üéØ Manual Tests</h2>
            <div style="text-align: center;">
                <button class="test-button" onclick="testFAB()">Test FAB Menu</button>
                <button class="test-button" onclick="testBottomBar()">Test Bottom Bar</button>
                <button class="test-button" onclick="testScrollButton()">Test Scroll Button</button>
                <button class="test-button" onclick="scrollToBottom()">Scroll to Bottom</button>
            </div>
        </div>

        <div class="scroll-content">
            <div>
                <h2>üìú Scroll Test Area</h2>
                <p>This is a large content area to test scrolling functionality.</p>
                <div class="scroll-indicator">‚¨áÔ∏è</div>
                <p>Scroll down to see the smart scroll button appear and change behavior.</p>
            </div>
            
            <div>
                <h3>üé® Middle Section</h3>
                <p>The scroll button should change from "down arrow" to "up arrow" based on your position.</p>
                <div class="scroll-indicator">üîÑ</div>
                <p>Keep scrolling to test the full functionality.</p>
            </div>
            
            <div>
                <h3>üèÅ Bottom Section</h3>
                <p>At the bottom, the scroll button should show "Back to Top".</p>
                <div class="scroll-indicator">‚¨ÜÔ∏è</div>
                <p>Click it to smoothly scroll back to the top!</p>
            </div>
        </div>

        <div class="test-section">
            <h2>üìä Component Information</h2>
            <div id="componentInfo">
                <!-- Component info will be populated by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Footer Container for Dynamic Loading -->
    <div id="footer-container"></div>

    <!-- Scripts -->
    <script src="js/modules/footer-loader.js"></script>
    <script src="js/modules/component-initializer.js"></script>
    
    <script>
        let detectionInterval;
        
        function createStatusCard(title, status, details = '') {
            const statusClass = status === 'success' ? 'success' : status === 'error' ? 'error' : 'warning';
            const icon = status === 'success' ? '‚úÖ' : status === 'error' ? '‚ùå' : '‚ö†Ô∏è';
            
            return `
                <div class="status-card ${statusClass}">
                    <h3>${icon} ${title}</h3>
                    <p><strong>${status.toUpperCase()}</strong></p>
                    ${details ? `<div class="component-info">${details}</div>` : ''}
                </div>
            `;
        }
        
        function runDetection() {
            const statusGrid = document.getElementById('statusGrid');
            const componentInfo = document.getElementById('componentInfo');
            
            // Check components
            const fabContainer = document.querySelector('.fab-container');
            const fabMain = document.getElementById('fabMain');
            const fabActions = document.getElementById('fabActions');
            const bottomBar = document.querySelector('.bottom-action-bar-fixed');
            const bottomQuoteBtn = document.getElementById('bottomQuoteBtn');
            const bottomChatBtn = document.getElementById('bottomChatBtn');
            const scrollBtn = document.getElementById('smartScrollBtn');
            const footerContainer = document.getElementById('footer-container');
            
            // Check scripts
            const fabScript = document.getElementById('fab-script');
            const bottomScript = document.getElementById('bottom-action-bar-script');
            const scrollScript = document.getElementById('scroll-button-script');
            
            // Generate status cards
            let statusHTML = '';
            statusHTML += createStatusCard('FAB Container', fabContainer ? 'success' : 'error', 
                fabContainer ? `Found: ${fabContainer.className}` : 'Not found in DOM');
            statusHTML += createStatusCard('FAB Main Button', fabMain ? 'success' : 'error',
                fabMain ? `ID: ${fabMain.id}` : 'Not found in DOM');
            statusHTML += createStatusCard('Bottom Action Bar', bottomBar ? 'success' : 'error',
                bottomBar ? `Found: ${bottomBar.className}` : 'Not found in DOM');
            statusHTML += createStatusCard('Smart Scroll Button', scrollBtn ? 'success' : 'error',
                scrollBtn ? `ID: ${scrollBtn.id}, Class: ${scrollBtn.className}` : 'Not found in DOM');
            statusHTML += createStatusCard('Footer Container', footerContainer ? 'success' : 'error',
                footerContainer ? `Content length: ${footerContainer.innerHTML.length}` : 'Not found in DOM');
            
            statusGrid.innerHTML = statusHTML;
            
            // Generate component info
            let infoHTML = '<h3>üîß Technical Details</h3>';
            infoHTML += `<div class="component-info">
                <strong>Scripts Loaded:</strong><br>
                FAB Script: ${fabScript ? '‚úÖ Loaded' : '‚ùå Missing'}<br>
                Bottom Bar Script: ${bottomScript ? '‚úÖ Loaded' : '‚ùå Missing'}<br>
                Scroll Button Script: ${scrollScript ? '‚úÖ Loaded' : '‚ùå Missing'}
            </div>`;
            
            infoHTML += `<div class="component-info">
                <strong>Page Info:</strong><br>
                Current Path: ${window.location.pathname}<br>
                In Pages Folder: ${window.location.pathname.includes('/pages/')}<br>
                Protocol: ${window.location.protocol}
            </div>`;
            
            componentInfo.innerHTML = infoHTML;
        }
        
        function testComponents() {
            console.log('üß™ Testing all components...');
            
            // Test FAB
            const fabMain = document.getElementById('fabMain');
            if (fabMain) {
                console.log('Testing FAB click...');
                fabMain.click();
                setTimeout(() => {
                    const fabActions = document.getElementById('fabActions');
                    if (fabActions && fabActions.classList.contains('active')) {
                        console.log('‚úÖ FAB menu opened successfully');
                        fabMain.click(); // Close it
                    } else {
                        console.log('‚ùå FAB menu did not open');
                    }
                }, 200);
            }
            
            // Test Bottom Bar
            const bottomQuoteBtn = document.getElementById('bottomQuoteBtn');
            if (bottomQuoteBtn) {
                console.log('‚úÖ Bottom quote button found and clickable');
            } else {
                console.log('‚ùå Bottom quote button not found');
            }
            
            // Test Scroll Button
            const scrollBtn = document.getElementById('smartScrollBtn');
            if (scrollBtn) {
                console.log('‚úÖ Scroll button found');
                // Scroll down to make it visible
                window.scrollTo(0, 500);
                setTimeout(() => {
                    if (scrollBtn.classList.contains('visible')) {
                        console.log('‚úÖ Scroll button became visible after scrolling');
                    } else {
                        console.log('‚ö†Ô∏è Scroll button not visible after scrolling');
                    }
                    window.scrollTo(0, 0); // Scroll back to top
                }, 500);
            } else {
                console.log('‚ùå Scroll button not found');
            }
        }
        
        function testFAB() {
            const fabMain = document.getElementById('fabMain');
            if (fabMain) {
                fabMain.click();
                alert('FAB menu should have opened! Check the bottom-right corner.');
            } else {
                alert('‚ùå FAB main button not found!');
            }
        }
        
        function testBottomBar() {
            const bottomQuoteBtn = document.getElementById('bottomQuoteBtn');
            if (bottomQuoteBtn) {
                bottomQuoteBtn.click();
                alert('Bottom quote button clicked! It should navigate or show quote form.');
            } else {
                alert('‚ùå Bottom quote button not found!');
            }
        }
        
        function testScrollButton() {
            const scrollBtn = document.getElementById('smartScrollBtn');
            if (scrollBtn) {
                // First scroll down to make it visible
                window.scrollTo(0, 800);
                setTimeout(() => {
                    scrollBtn.click();
                    alert('Scroll button clicked! It should scroll to top or bottom.');
                }, 500);
            } else {
                alert('‚ùå Scroll button not found!');
            }
        }
        
        function scrollToBottom() {
            window.scrollTo({
                top: document.body.scrollHeight,
                behavior: 'smooth'
            });
        }
        
        function forceInitialize() {
            if (window.ComponentInitializer) {
                console.log('üîÑ Force initializing components...');
                window.ComponentInitializer.init();
                setTimeout(runDetection, 1000);
            } else {
                alert('Component Initializer not available');
            }
        }
        
        // Auto-run detection when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                runDetection();
                // Run detection periodically for the first 10 seconds
                detectionInterval = setInterval(runDetection, 2000);
                setTimeout(() => {
                    clearInterval(detectionInterval);
                    console.log('Stopped periodic detection');
                }, 10000);
            }, 1000);
        });
        
        // Monitor for dynamic content changes
        const observer = new MutationObserver((mutations) => {
            let shouldUpdate = false;
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                    mutation.addedNodes.forEach((node) => {
                        if (node.nodeType === 1 && (
                            node.classList?.contains('fab-container') ||
                            node.classList?.contains('bottom-action-bar-fixed') ||
                            node.id === 'smartScrollBtn'
                        )) {
                            shouldUpdate = true;
                        }
                    });
                }
            });
            
            if (shouldUpdate) {
                console.log('üîÑ Components detected, updating status...');
                setTimeout(runDetection, 500);
            }
        });
        
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
    </script>
</body>
</html>