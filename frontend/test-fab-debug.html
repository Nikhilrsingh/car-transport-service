<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAB & Bottom Action Bar Debug Test</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Base CSS -->
    <link rel="stylesheet" href="css/styles.css">
    
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        
        .debug-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .status {
            margin: 10px 0;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        .info { background: #d1ecf1; color: #0c5460; }
        
        .test-section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #0056b3;
        }
        
        .content {
            min-height: 1000px;
            padding: 20px;
            background: linear-gradient(45deg, #f0f0f0, #e0e0e0);
            margin: 20px 0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="debug-container">
        <h1>üîß FAB & Bottom Action Bar Debug Test</h1>
        
        <div class="test-section">
            <h3>Component Status</h3>
            <div id="status-container">
                <div class="status info">Initializing tests...</div>
            </div>
            <button onclick="runTests()">üîÑ Run Tests</button>
            <button onclick="checkElements()">üîç Check Elements</button>
            <button onclick="checkScripts()">üìú Check Scripts</button>
        </div>
        
        <div class="test-section">
            <h3>Manual Tests</h3>
            <button onclick="testFABClick()">üéØ Test FAB Click</button>
            <button onclick="testBottomBarClick()">üì± Test Bottom Bar</button>
            <button onclick="testScrollButton()">‚¨ÜÔ∏è Test Scroll Button</button>
        </div>
        
        <div class="content">
            <h2>Scroll Test Content</h2>
            <p>This is test content to enable scrolling. The scroll button should appear when you scroll down.</p>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
            <p>Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
            <p>Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur.</p>
            <p>Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
            
            <h3>More Content</h3>
            <p>Keep scrolling to test the scroll button functionality...</p>
            <p>The FAB menu should be visible in the bottom right corner.</p>
            <p>The bottom action bar should be visible at the bottom of the screen.</p>
            
            <div style="height: 500px; background: linear-gradient(to bottom, #e3f2fd, #bbdefb); padding: 20px; margin: 20px 0; border-radius: 8px;">
                <h4>Scroll Area</h4>
                <p>This is additional content to make the page scrollable.</p>
            </div>
        </div>
    </div>

    <!-- Footer Container for Dynamic Loading -->
    <div id="footer-container"></div>

    <!-- Scripts -->
    <script src="js/modules/footer-loader.js"></script>
    
    <script>
        function addStatus(message, type = 'info') {
            const container = document.getElementById('status-container');
            const status = document.createElement('div');
            status.className = `status ${type}`;
            status.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            container.appendChild(status);
            console.log(message);
        }
        
        function runTests() {
            addStatus('Starting comprehensive tests...', 'info');
            
            // Clear previous results
            document.getElementById('status-container').innerHTML = '';
            
            setTimeout(() => {
                checkElements();
                checkScripts();
                checkCSS();
                checkEventListeners();
            }, 1000);
        }
        
        function checkElements() {
            addStatus('Checking DOM elements...', 'info');
            
            // Check footer container
            const footerContainer = document.getElementById('footer-container');
            addStatus(`Footer Container: ${footerContainer ? '‚úÖ Found' : '‚ùå Missing'}`, footerContainer ? 'success' : 'error');
            
            // Check FAB elements
            const fabContainer = document.querySelector('.fab-container');
            const fabMain = document.getElementById('fabMain');
            const fabActions = document.getElementById('fabActions');
            
            addStatus(`FAB Container: ${fabContainer ? '‚úÖ Found' : '‚ùå Missing'}`, fabContainer ? 'success' : 'error');
            addStatus(`FAB Main Button: ${fabMain ? '‚úÖ Found' : '‚ùå Missing'}`, fabMain ? 'success' : 'error');
            addStatus(`FAB Actions: ${fabActions ? '‚úÖ Found' : '‚ùå Missing'}`, fabActions ? 'success' : 'error');
            
            // Check Bottom Action Bar
            const bottomBar = document.querySelector('.bottom-action-bar-fixed');
            const bottomQuoteBtn = document.getElementById('bottomQuoteBtn');
            const bottomChatBtn = document.getElementById('bottomChatBtn');
            
            addStatus(`Bottom Action Bar: ${bottomBar ? '‚úÖ Found' : '‚ùå Missing'}`, bottomBar ? 'success' : 'error');
            addStatus(`Bottom Quote Button: ${bottomQuoteBtn ? '‚úÖ Found' : '‚ùå Missing'}`, bottomQuoteBtn ? 'success' : 'error');
            addStatus(`Bottom Chat Button: ${bottomChatBtn ? '‚úÖ Found' : '‚ùå Missing'}`, bottomChatBtn ? 'success' : 'error');
            
            // Check Scroll Button
            const scrollBtn = document.getElementById('smartScrollBtn');
            addStatus(`Smart Scroll Button: ${scrollBtn ? '‚úÖ Found' : '‚ùå Missing'}`, scrollBtn ? 'success' : 'error');
            
            // Check if footer content is loaded
            if (footerContainer && footerContainer.innerHTML.trim()) {
                addStatus('Footer content loaded successfully', 'success');
            } else {
                addStatus('Footer content not loaded or empty', 'error');
            }
        }
        
        function checkScripts() {
            addStatus('Checking loaded scripts...', 'info');
            
            const scripts = [
                'footer-loader.js',
                'floating-action-menu.js',
                'bottom-action-bar.js',
                'scroll-button.js'
            ];
            
            scripts.forEach(scriptName => {
                const script = document.querySelector(`script[src*="${scriptName}"]`);
                addStatus(`${scriptName}: ${script ? '‚úÖ Loaded' : '‚ùå Missing'}`, script ? 'success' : 'error');
            });
        }
        
        function checkCSS() {
            addStatus('Checking CSS files...', 'info');
            
            const cssFiles = [
                'floating-action-menu.css',
                'bottom-action-bar.css',
                'scroll-button.css'
            ];
            
            cssFiles.forEach(cssFile => {
                const link = document.querySelector(`link[href*="${cssFile}"]`);
                addStatus(`${cssFile}: ${link ? '‚úÖ Loaded' : '‚ùå Missing'}`, link ? 'success' : 'error');
            });
        }
        
        function checkEventListeners() {
            addStatus('Checking event listeners...', 'info');
            
            const fabMain = document.getElementById('fabMain');
            if (fabMain) {
                // Try to trigger click to see if event listener is attached
                try {
                    const event = new Event('click');
                    fabMain.dispatchEvent(event);
                    addStatus('FAB click event dispatched successfully', 'success');
                } catch (e) {
                    addStatus(`FAB click event error: ${e.message}`, 'error');
                }
            }
        }
        
        function testFABClick() {
            const fabMain = document.getElementById('fabMain');
            if (fabMain) {
                addStatus('Clicking FAB main button...', 'info');
                fabMain.click();
                
                setTimeout(() => {
                    const fabActions = document.getElementById('fabActions');
                    if (fabActions && fabActions.classList.contains('active')) {
                        addStatus('FAB menu opened successfully!', 'success');
                    } else {
                        addStatus('FAB menu did not open', 'error');
                    }
                }, 100);
            } else {
                addStatus('FAB main button not found', 'error');
            }
        }
        
        function testBottomBarClick() {
            const bottomQuoteBtn = document.getElementById('bottomQuoteBtn');
            if (bottomQuoteBtn) {
                addStatus('Clicking bottom quote button...', 'info');
                bottomQuoteBtn.click();
                addStatus('Bottom quote button clicked', 'success');
            } else {
                addStatus('Bottom quote button not found', 'error');
            }
        }
        
        function testScrollButton() {
            const scrollBtn = document.getElementById('smartScrollBtn');
            if (scrollBtn) {
                addStatus('Testing scroll button...', 'info');
                
                // Scroll down to make button visible
                window.scrollTo(0, 500);
                
                setTimeout(() => {
                    if (scrollBtn.classList.contains('visible')) {
                        addStatus('Scroll button is visible after scrolling', 'success');
                        scrollBtn.click();
                        addStatus('Scroll button clicked', 'success');
                    } else {
                        addStatus('Scroll button not visible after scrolling', 'error');
                    }
                }, 500);
            } else {
                addStatus('Scroll button not found', 'error');
            }
        }
        
        // Auto-run tests when page loads
        window.addEventListener('load', () => {
            setTimeout(() => {
                addStatus('Page loaded, running initial tests...', 'info');
                runTests();
            }, 2000);
        });
        
        // Monitor for dynamic content loading
        const observer = new MutationObserver((mutations) => {
            mutations.forEach((mutation) => {
                if (mutation.type === 'childList' && mutation.addedNodes.length > 0) {
                    mutation.addedNodes.forEach((node) => {
                        if (node.nodeType === 1) { // Element node
                            if (node.classList && (node.classList.contains('fab-container') || node.classList.contains('bottom-action-bar-fixed'))) {
                                addStatus(`Dynamic element added: ${node.className}`, 'success');
                            }
                        }
                    });
                }
            });
        });
        
        observer.observe(document.body, {
            childList: true,
            subtree: true
        });
    </script>
</body>
</html>